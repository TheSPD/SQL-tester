<dom-module id="list-datasets">
	<style>
	paper-card{
		width: 100%;
	}
	paper-card + paper-card{
		margin-top:8px;
		
	}
	</style>
	<template>
		<template is="dom-repeat" items="[[data]]">
				<paper-card heading="[[item.heading]]" plot="[[item]]">
				  <div class="card-content">
				    [[item.description]]
				  </div>
				  <div class="card-actions">
				    <paper-button on-click="_openDataset">Open</paper-button>
				    <paper-button on-click="_openExplore">Explore</paper-button>
					<template is="dom-if" if="{{!info.isAdmin}}">
				    	<paper-button on-click="_openMyPlots">My Plots</paper-button>
					</template>
				  </div>
				</paper-card>		    
		</template>
	</template>
</dom-module>
<script type="text/javascript">
	Polymer({
		is: "list-datasets",

		properties: {
			method:{
				type:String,
			},
			data:{
				type: Array,
			},
			info:{
				type: Object,
			}
		},

		getObject: function(heading){
			for(var i in this.data){
				if(this.data[i].heading == heading){
					return this.data[i];
				}
			}
			return null;
		},

		getPlot: function(event){
			return event.srcElement.parentElement.parentElement.plot;
		},

		_openDataset: function(event){
			var clickedProblem = this.getPlot(event);
			page('/datasets/' + clickedProblem._id);
		},

		_openExplore: function(event){
			var clickedProblem = this.getPlot(event);
			page('/datasets/' + clickedProblem._id+'/explore');
		},

		_openMyPlots: function(event){
			var clickedProblem = this.getPlot(event);
			page('/datasets/' + clickedProblem._id+'/myPlots');
		}
	})
</script> 	